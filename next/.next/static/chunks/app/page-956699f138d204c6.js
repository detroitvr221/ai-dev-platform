(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6160:function(e,t,n){Promise.resolve().then(n.bind(n,5687))},5687:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(7437),l=n(2265);function a(e){let{files:t,activePath:n,onOpen:l,onNew:a,onMove:r}=e;return(0,s.jsxs)("div",{className:"w-[280px] min-w-[220px] max-w-[360px] h-full bg-white border-r",children:[(0,s.jsxs)("div",{className:"px-3 py-2 border-b text-xs font-medium flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Files"}),(0,s.jsx)("button",{className:"px-2 py-1 border rounded text-[11px]",onClick:a,children:"New"})]}),(0,s.jsx)("div",{className:"text-sm divide-y overflow-auto",style:{height:"calc(100% - 33px)"},children:t.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 ".concat(n===e?"bg-blue-50 text-blue-700":""),children:[(0,s.jsx)("button",{className:"flex-1 text-left hover:underline",onClick:()=>l(e),children:e}),(0,s.jsx)("button",{className:"text-[11px] px-1.5 py-0.5 border rounded",onClick:()=>{let t=prompt("Move/Rename to path",e);t&&t!==e&&r(e,t)},children:"Move"})]},e))})]})}var r=n(1946),c=n(5095),i=n(5755),o=n(9413),d=n(4670);function u(e){let{path:t,value:n,onChange:l}=e;return(0,s.jsx)(r.ZP,{value:n,height:"100%",theme:"dark",extensions:function(e){var t;switch(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()){case"html":return[(0,c.dy)({autoCloseTags:!0})];case"css":return[(0,o.iv)()];case"json":return[(0,d.AV)()];default:return[(0,i.eJ)({jsx:!1,typescript:!1})]}}(t),onChange:l})}function x(e){let{html:t}=e;return(0,s.jsx)("iframe",{title:"preview",className:"w-full h-full border-0 bg-white",srcDoc:t,sandbox:"allow-scripts allow-same-origin"})}var p=n(8680);function h(){let[e,t]=l.useState(null),[n,a]=l.useState(!1),[r,c]=l.useState(""),[i,o]=l.useState([]);l.useEffect(()=>{let e=(0,p.io)("/",{path:"/socket.io"});return t(e),e.on("connect",()=>a(!0)),e.on("disconnect",()=>a(!1)),e.on("agent_event",e=>{(null==e?void 0:e.payload)&&o(t=>[...t,{role:"agent",text:String(e.payload)}])}),()=>{e.close()}},[]);let d=()=>{r.trim()&&e&&(e.emit("chat:user",{text:r}),o(e=>[...e,{role:"user",text:r}]),c(""))};return(0,s.jsxs)("div",{className:"h-48 border-t p-3 text-sm flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[(0,s.jsx)("span",{children:"AI Chat"}),(0,s.jsx)("span",{className:n?"text-green-600":"text-slate-400",children:n?"connected":"disconnected"})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto border rounded p-2 bg-slate-50",children:0===i.length?(0,s.jsx)("div",{className:"text-xs text-slate-400",children:"Say helloâ€¦"}):(0,s.jsx)("div",{className:"space-y-1",children:i.slice(-50).map((e,t)=>(0,s.jsxs)("div",{className:"user"===e.role?"text-blue-700":"text-slate-800",children:[(0,s.jsx)("span",{className:"text-[11px] uppercase mr-2 opacity-60",children:e.role}),e.text]},t))})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{className:"flex-1 border rounded px-2 py-1",value:r,onChange:e=>c(e.target.value),placeholder:"Type here...",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),d())}}),(0,s.jsx)("button",{className:"px-3 py-1.5 border rounded",onClick:d,children:"Send"})]})]})}var m=n(7600);let f="novacode-next-ui";async function v(){try{return await (0,m.U2)(f)||void 0}catch(e){return}}async function j(e){await (0,m.t8)(f,e)}function y(){var e;let[t,n]=(0,l.useState)({"/index.html":{content:'<!doctype html>\n<html>\n<head><meta charset="UTF-8"/><title>App</title></head>\n<body>\n<div id="app">Hello World</div>\n</body>\n</html>',language:"html"},"/styles.css":{content:"body{font-family: ui-sans-serif; padding:16px}",language:"css"},"/main.js":{content:'document.getElementById("app").textContent = "Hello from JS"',language:"javascript"},"/package.json":{content:JSON.stringify({name:"novacode-next",version:"0.1.0",dependencies:{},devDependencies:{}},null,2),language:"json"}}),[r,c]=(0,l.useState)("/index.html"),[i,o]=(0,l.useState)("code"),d=(0,l.useMemo)(()=>(function(e){var t;let n=(null===(t=e["/index.html"])||void 0===t?void 0:t.content)||"",s=Object.entries(e).filter(e=>{let[t]=e;return t.endsWith(".css")}).map(e=>{let[,t]=e;return t.content}).join("\n"),l=Object.entries(e).filter(e=>{let[t]=e;return t.endsWith(".js")}).map(e=>{let[,t]=e;return t.content}).join("\n"),a=n||'<!doctype html>\n<html>\n<head>\n<meta charset="UTF-8"/>\n<title>Preview</title>\n</head>\n<body>\n<div id="app">Hello</div>\n</body>\n</html>';return(a=(a=a.replace(/<script[^>]*src=["'][^"']+["'][^>]*>\s*<\/script>/gi,"").replace(/<link[^>]*rel=["']stylesheet["'][^>]*>/gi,"")).replace(/<head(\s*)>/i,"<head$1>\n<style>\n".concat(s,"\n</style>"))).replace(/<\/body>/i,"<script>\n".concat(l,"\n</script></body>"))})(t),[t]),p=Object.keys(t).sort();return(0,l.useEffect)(()=>{(async()=>{try{let e=await v();e&&(n(e.files),c(e.activePath))}catch(e){}})()},[]),(0,l.useEffect)(()=>{(async()=>{try{await j({files:t,activePath:r})}catch(e){}})()},[t,r]),(0,s.jsxs)("div",{className:"min-h-screen bg-white text-slate-900 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex-1 min-h-0 flex",children:[(0,s.jsx)(a,{files:p,activePath:r,onOpen:c,onNew:()=>{let e=prompt("New file path","/new.js");if(!e)return;let t=function(e){var t;switch(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()){case"html":return"html";case"css":return"css";case"json":return"json";case"js":return"javascript";default:return"plaintext"}}(e);n(n=>({...n,[e]:{content:"",language:t}})),c(e)},onMove:(e,t)=>{n(n=>{let s={...n};return s[t]=n[e],delete s[e],s}),r===e&&c(t)}}),(0,s.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col",children:[(0,s.jsxs)("div",{className:"px-3 py-2 border-b text-xs flex items-center gap-2",children:[(0,s.jsx)("button",{className:"px-2 py-1 rounded ".concat("code"===i?"bg-slate-900 text-white":"bg-slate-100"),onClick:()=>o("code"),children:"Code"}),(0,s.jsx)("button",{className:"px-2 py-1 rounded ".concat("preview"===i?"bg-slate-900 text-white":"bg-slate-100"),onClick:()=>o("preview"),children:"Preview"}),(0,s.jsx)("span",{className:"text-slate-500 ml-auto text-[11px]",children:"Next.js demo"})]}),"code"===i?(0,s.jsx)(u,{path:r,value:(null===(e=t[r])||void 0===e?void 0:e.content)||"",onChange:e=>n(t=>({...t,[r]:{...t[r],content:e}}))}):(0,s.jsx)(x,{html:d})]})]}),(0,s.jsx)(h,{})]})}}},function(e){e.O(0,[401,425,971,117,744],function(){return e(e.s=6160)}),_N_E=e.O()}]);